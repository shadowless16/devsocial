{"file":"C:\\Users\\akdav\\Downloads\\devsocial\\models\\Referral.ts","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qDAA0D;AAgB1D,MAAM,cAAc,GAAG,IAAI,iBAAM,CAC/B;IACE,QAAQ,EAAE;QACR,IAAI,EAAE,iBAAM,CAAC,KAAK,CAAC,QAAQ;QAC3B,GAAG,EAAE,MAAM;QACX,QAAQ,EAAE,IAAI;QACd,KAAK,EAAE,IAAI;KACZ;IACD,QAAQ,EAAE;QACR,IAAI,EAAE,iBAAM,CAAC,KAAK,CAAC,QAAQ;QAC3B,GAAG,EAAE,MAAM;QACX,QAAQ,EAAE,IAAI;QACd,KAAK,EAAE,IAAI;KACZ;IACD,YAAY,EAAE;QACZ,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,IAAI;QACd,MAAM,EAAE,IAAI;QACZ,KAAK,EAAE,IAAI;KACZ;IACD,MAAM,EAAE;QACN,IAAI,EAAE,MAAM;QACZ,IAAI,EAAE,CAAC,SAAS,EAAE,WAAW,EAAE,SAAS,CAAC;QACzC,OAAO,EAAE,SAAS;QAClB,KAAK,EAAE,IAAI;KACZ;IACD,WAAW,EAAE;QACX,IAAI,EAAE,IAAI;KACX;IACD,SAAS,EAAE;QACT,IAAI,EAAE,IAAI;QACV,QAAQ,EAAE,IAAI;QACd,KAAK,EAAE,IAAI;KACZ;IACD,cAAc,EAAE;QACd,IAAI,EAAE,OAAO;QACb,OAAO,EAAE,KAAK;KACf;IACD,cAAc,EAAE;QACd,IAAI,EAAE,MAAM;QACZ,OAAO,EAAE,EAAE;KACZ;IACD,cAAc,EAAE;QACd,IAAI,EAAE,MAAM;QACZ,OAAO,EAAE,EAAE;KACZ;CACF,EACD;IACE,UAAU,EAAE,IAAI;CACjB,CACF,CAAA;AAED,yCAAyC;AACzC,cAAc,CAAC,KAAK,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAA;AAChD,cAAc,CAAC,KAAK,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAA;AAChD,cAAc,CAAC,KAAK,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAA;AAEpD,kBAAe,kBAAQ,CAAC,MAAM,CAAC,QAAQ,IAAI,kBAAQ,CAAC,KAAK,CAAY,UAAU,EAAE,cAAc,CAAC,CAAA","names":[],"sources":["C:\\Users\\akdav\\Downloads\\devsocial\\models\\Referral.ts"],"sourcesContent":["import mongoose, { Schema, type Document } from \"mongoose\"\n\nexport interface IReferral extends Document {\n  referrer: mongoose.Types.ObjectId\n  referred: mongoose.Types.ObjectId\n  referralCode: string\n  status: \"pending\" | \"completed\" | \"expired\"\n  completedAt?: Date\n  expiresAt: Date\n  rewardsClaimed: boolean\n  referrerReward: number\n  referredReward: number\n  createdAt: Date\n  updatedAt: Date\n}\n\nconst ReferralSchema = new Schema<IReferral>(\n  {\n    referrer: {\n      type: Schema.Types.ObjectId,\n      ref: \"User\",\n      required: true,\n      index: true,\n    },\n    referred: {\n      type: Schema.Types.ObjectId,\n      ref: \"User\",\n      required: true,\n      index: true,\n    },\n    referralCode: {\n      type: String,\n      required: true,\n      unique: true,\n      index: true,\n    },\n    status: {\n      type: String,\n      enum: [\"pending\", \"completed\", \"expired\"],\n      default: \"pending\",\n      index: true,\n    },\n    completedAt: {\n      type: Date,\n    },\n    expiresAt: {\n      type: Date,\n      required: true,\n      index: true,\n    },\n    rewardsClaimed: {\n      type: Boolean,\n      default: false,\n    },\n    referrerReward: {\n      type: Number,\n      default: 25,\n    },\n    referredReward: {\n      type: Number,\n      default: 15,\n    },\n  },\n  {\n    timestamps: true,\n  },\n)\n\n// Compound indexes for efficient queries\nReferralSchema.index({ referrer: 1, status: 1 })\nReferralSchema.index({ referred: 1, status: 1 })\nReferralSchema.index({ referralCode: 1, status: 1 })\n\nexport default mongoose.models.Referral || mongoose.model<IReferral>(\"Referral\", ReferralSchema)\n"],"version":3}